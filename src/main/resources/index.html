<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<style>

    body {
        font: 10px sans-serif;
    }

    .axis path,
    .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
    }

    .x.axis path {
        display: none;
    }

    .line {
        fill: none;
        stroke: steelblue;
        stroke-width: 1.5px;
    }

    .stripe{
        fill: black;
        stroke: none;
        height:20px;

    }

</style>
<body>
<h1>Data Quality Visualization</h1>
<h2>powered by <a href="http://d3js.org/">d3.js</a>, <a href="https://dropwizard.github.io/dropwizard/">Dropwizzard</a> and <a href="https://github.com/ieg-vienna/TimeBench">TimeBench</a></h2>
<p id="example"/>
<script src="/d3/d3.js"></script>
<script src="/js/timeseriesview.js"></script>
<script src="/js/qualitybarview.js"></script>
<script>

    //global vars
    var heightOfQualityBar = 100,
        serverUrl = "http://localhost:8080",
        column = "w";

    //get chart
    var timeSeriesView = TimeSeriesView()
        .x(function(d) { return new Date(+d.date); })
        .y(function(d) { return +d.column; })
        .margin({top: 120,right: 80, bottom: 30, left: 50})
        .column(column);

    var qualityBarView = QualityBarView()
        .x(function(d) { return new Date(+d.date); })
        .y(function(d) { return +d.quality; })


    //get data
    d3.json(serverUrl+"/get-data?column="+column, function(error, json) {
        if (error) return console.warn(error);
        var data = d3.select("#example")
          .datum(json);
        data.call(timeSeriesView);
        console.log(json);
        data.call(qualityBarView);

    })


//     focus + context
    /* var brush = d3.svg.brush()
     .x(x2)
     .on("brush", brushed);*/




    // var timeSliderView = TimeSliderView()
    /*function brushed() {
        x.domain(brush.empty() ? x2.domain() : brush.extent());
        focus.select(".area").attr("d", area);
        focus.select(".x.axis").call(xAxis);
    }*/

</script>
</body>
</html>


